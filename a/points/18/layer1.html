<!DOCTYPE html>
<html lang="en">
<head>
<script src="/assets/js/storage-fallback.js"></script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-NRRL1TSE7Z"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-NRRL1TSE7Z');
</script>

  <meta charset="UTF-8" />
  <title>Layer 1 - Theory Note</title>
  <link rel="stylesheet" href="../../dashboard.css" />
  <script type="module" src="../../../shared/auth-session.js"></script>

  <style>
    *, *::before, *::after {
      box-sizing: border-box;
    }
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      background: #dbe8f6;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 20px;
      background-color: #003366;
      color: white;
    }

    .header-left,
    .header-right {
      flex: 1;
    }

    .header-center {
      flex: 2;
      text-align: center;
    }

    .header-center h1 {
      margin: 0;
      font-size: 1.8em;
    }

    .syllabus-button {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 10px 16px;
      border-radius: 999px;
      border: 2px solid #ffd54f;
      background: #ffb300;
      color: #0b1b3a;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 8px 18px rgba(0, 0, 0, 0.2);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .syllabus-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 24px rgba(0, 0, 0, 0.25);
    }

    .syllabus-modal {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.55);
      display: none;
      align-items: center;
      justify-content: center;
      padding: 20px;
      z-index: 9999;
    }

    .syllabus-modal.is-open {
      display: flex;
    }

    .syllabus-modal-content {
      background: #ffffff;
      border-radius: 16px;
      padding: 24px;
      max-width: 900px;
      width: 100%;
      max-height: 85vh;
      overflow: auto;
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.35);
      position: relative;
    }

    .syllabus-modal-content img {
      width: 100%;
      height: auto;
      border-radius: 12px;
      border: 1px solid #e0e0e0;
    }

    .syllabus-close {
      position: absolute;
      top: 12px;
      right: 12px;
      background: #003366;
      color: #ffffff;
      border: none;
      border-radius: 999px;
      padding: 6px 12px;
      cursor: pointer;
      font-weight: 600;
    }

    .info-line {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 3px;
      font-size: 1em;
      color: #f0f0f0;
    }

    .logo {
      height: 45px;
    }

    #maarif-logo {
      height: 55px;
    }

    main {
      padding: 50px;
    }


    .dashboard-section-title {
      display: inline-block;
      font-weight: bold;
      margin: 15px 0 8px;
      font-size: 1.2em;
      color: #fff;
      background: #003366;
      padding: 6px 10px;
      border-radius: 4px;
      white-space: nowrap;
      max-width: none;
    }

    #video-section {
      width: 90%;
      margin: 20px auto;
      padding-bottom: 20px;
    }

    iframe {
      width: 100%;
      border: 1px solid #ccc;
      border-radius: 6px;
      margin-bottom: 20px;
    }

    .videos iframe {
      height: 250px;
    }

    .resources-grid {
      display: flex;
      gap: 20px;
    }

    .videos-column, .extras-column {
      flex: 1;
    }

    .extras-column {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .placeholder {
      background: #f0f0f0;
      border: 1px solid #ccc;
      border-radius: 6px;
      padding: 20px;
      text-align: center;
      height: 250px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .actions {
      display: flex;
      justify-content: center;
      gap: 15px;
      flex-wrap: wrap;
      margin-top: 30px;
    }

    .actions-heading {
      flex-basis: 100%;
      text-align: center;
      margin: 0;
    }

    .layer-menu {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.4rem;
      text-align: center;
      margin-bottom: 1.2rem;
    }

    .header .layer-menu {
      align-items: flex-start;
      text-align: left;
      margin-bottom: 0;
    }

    .layer-menu-links {
      display: flex;
      flex-direction: column;
      gap: 10px;
      align-items: center;
      margin-top: 0.4rem;
    }

    .header .layer-menu-links {
      align-items: flex-start;
    }

    .layer-link {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 10px 18px;
      border-radius: 999px;
      background: #ffffff;
      color: #003366;
      text-decoration: none;
      font-weight: 600;
      border: 1px solid #c9d5e5;
      box-shadow: 0 6px 16px rgba(0, 51, 102, 0.12);
      transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
    }

    .layer-link:hover {
      background: #e6f0ff;
      transform: translateY(-2px);
      box-shadow: 0 10px 24px rgba(0, 51, 102, 0.18);
    }

    .layer-link .layer-number {
      background: #003366;
      color: #ffffff;
      padding: 2px 8px;
      border-radius: 999px;
      font-size: 0.85em;
    }

    .help-wrapper {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    #help-section {
      display: none;
      margin-top: 10px;
    }

    .highlight-button {
      background-color: #007bff;
      color: white;
      border: none;
      padding: 15px 25px;
      margin: 10px;
      border-radius: 8px;
      font-size: 1.2em;
      cursor: pointer;
      transition: background 0.3s, transform 0.2s;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }

    .highlight-button:hover {
      transform: scale(1.05);
    }

    .btn-clear {
      background-color: #28a745;
    }

    .btn-clear:hover {
      background-color: #218838;
    }

    .btn-help {
      background-color: #ff9800;
    }

    .btn-help:hover {
      background-color: #e68900;
    }

    .btn-confused {
      background-color: #dc3545;
    }

    .btn-confused:hover {
      background-color: #c82333;
    }

    #help-section {
      display: none;
      text-align: center;
      margin-top: 20px;
    }

    #error-message {
      text-align: center;
      margin: 50px auto;
      padding: 30px;
      font-size: 1.3em;
      color: red;
      max-width: 600px;
      background: #ffe5e5;
      border-radius: 10px;
      font-weight: bold;
    }

    footer {
      margin-top: 50px;
      text-align: center;
      padding: 20px;
      background: #e0e0e0;
      color: #333;
      font-size: 0.95em;
    }

    .section-divider {
      height: 4px;
      width: 100%;
      margin: 40px 0;
      background: linear-gradient(to right, #003366, #00bfff, #003366);
      border-radius: 2px;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      line-height: 1.7;
      color: #2c3e50;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      padding: 20px;
      min-height: 100vh;
    }

    .container {
      max-width: 1100px;
      margin: 0 auto;
      background: white;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      overflow: hidden;
    }

    .header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 40px;
      text-align: center;
    }

    .header-top {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      align-items: flex-start;
      justify-content: center;
      text-align: left;
    }

    .header-text {
      flex: 1;
      min-width: 240px;
    }

    .header-text h1,
    .header-text p {
      text-align: left;
    }

    .header h1 {
      font-size: 2.5em;
      margin-bottom: 10px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
    }

    .header p {
      font-size: 1.2em;
      opacity: 0.95;
    }

    .content {
      padding: 50px;
    }

    .section {
      margin-bottom: 50px;
      padding: 30px;
      background: #f8f9fa;
      border-radius: 15px;
      border-left: 5px solid #667eea;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .section:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);
    }

    .section-title {
      color: #667eea;
      font-size: 1.8em;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 3px solid #667eea;
      max-width: none;
    }

    .subsection {
      margin: 25px 0;
    }

    .subsection-title {
      color: #764ba2;
      font-size: 1.4em;
      margin-bottom: 15px;
      font-weight: 600;
    }

    .keyword {
      background: #e8eaf6;
      color: #5e35b1;
      padding: 2px 8px;
      border-radius: 4px;
      font-weight: 600;
      display: inline-block;
      margin: 2px 0;
    }

    ul {
      margin: 15px 0 15px 30px;
    }

    li {
      margin: 10px 0;
      padding-left: 10px;
    }

    li::marker {
      color: #667eea;
      font-weight: bold;
    }

    .formula {
      background: #e8eaf6;
      padding: 15px;
      border-radius: 8px;
      margin: 15px 0;
      font-family: 'Courier New', monospace;
      border-left: 4px solid #764ba2;
    }

    .highlight-box {
      background: #fff3cd;
      border-left: 4px solid #ffc107;
      padding: 15px;
      margin: 15px 0;
      border-radius: 5px;
    }

    .download-btn {
      display: none;
    }

    @media (max-width: 768px) {
      .content {
        padding: 30px 20px;
      }

      .header h1 {
        font-size: 1.8em;
      }

      .section {
        padding: 20px;
      }

      .download-btn {
        bottom: 20px;
        right: 20px;
        padding: 12px 20px;
        font-size: 0.9em;
      }
    }

    .process-step {
      background: white;
      padding: 12px;
      margin: 8px 0;
      border-radius: 8px;
      border-left: 3px solid #667eea;
    }

</style>
<script defer src="/assets/js/paste-guard.js"></script>
</head>
<body>
  <header>

    <div class="header-left">
      <a href="../../dashboard.html">
        <img src="../../../images/maarifLOGO.png" class="logo" id="maarif-logo" />
      </a>
    </div>
    <div class="header-center">
      <h1>Layer 1: Theoretical Foundation</h1>
      <div class="info-line">
        <span id="point-title"></span>
        <span id="student-name"></span>
        <span id="platform-name"></span>
      </div>
    </div>
    <div class="header-right" style="text-align:right;">
      <button class="syllabus-button" type="button" id="open-syllabus" aria-haspopup="dialog" aria-controls="syllabus-modal">
        üìå Syllabus
      </button>
      <img src="../../../images/cambridge.png" class="logo" />

    </div>
  </header>
  <div class="syllabus-modal" id="syllabus-modal" role="dialog" aria-modal="true" aria-labelledby="syllabus-title">
    <div class="syllabus-modal-content">
      <button class="syllabus-close" type="button" id="close-syllabus">Close ‚úï</button>
      <h2 id="syllabus-title" style="margin-top: 0; color: #003366;">AI Syllabus Points</h2>
      <img src="AI%20syllabus.png" alt="AI syllabus points for this page">
    </div>
  </div>

  <div id="error-message" style="display: none;">
    ‚ö†Ô∏è You must be logged in to view this content.
  </div>

  <main id="content-area" style="display: none;">
<div class="container">
        <div class="header">
            <div class="header-top">
                <div class="layer-menu" aria-label="Layer navigation">
                    <div class="layer-menu-links">
                        <a class="layer-link" href="layer2.html"><span class="layer-number">2</span> Layer 2</a>
                        <a class="layer-link" href="layer3.html"><span class="layer-number">3</span> Layer 3</a>
                        <a class="layer-link" href="layer4.html"><span class="layer-number">4</span> Layer 4</a>
                    </div>
                </div>
                <div class="header-text">
                    <h1>18. Artificial Intelligence</h1>
                    <p>A level Theory notes prepared by Dr. Hamdeni</p>
                </div>
            </div>
        </div>

        <div class="content">
            <div class="section">
                <h2 class="section-title">18.a: Show understanding of how graphs can be used to aid Artificial Intelligence</h2>
                
                <p>Graphs are a key data structure in AI, representing relationships between data points. They are used in various AI applications for solving problems involving paths, networks, and relational data.</p>

                <div class="subsection">
                    <h3 class="subsection-title">Key Concepts in Graphs:</h3>
                    <ul>
                        <li><span class="keyword">Node (Vertex)</span>: Represents an entity, such as a location, object, or point in a network.</li>
                        <li><span class="keyword">Edge</span>: Represents the connection or relationship between two nodes.</li>
                        <li><span class="keyword">Weights</span>: Numerical values representing the cost, distance, or time associated with the connection.</li>
                        <li><span class="keyword">Path</span>: A sequence of edges connecting two nodes.</li>
                        <li>Artificial neural networks can be drawn as graphs, where each neuron is a node and each connection is an edge. A value (weight) can be attached to each connection to show how strongly one neuron influences another.</li>
                    </ul>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">Applications of Graphs in AI:</h3>
                    <ul>
                        <li><strong>Pathfinding and Navigation:</strong> Finding the shortest or optimal route in GPS systems.</li>
                        <li><strong>Network Routing:</strong> Optimizing data transfer in communication networks.</li>
                        <li><strong>Knowledge Representation:</strong> Representing relationships between concepts, such as in semantic networks.</li>
                    </ul>
                    
                    <div style="background: white; padding: 20px; margin-top: 20px; border-radius: 10px; border-left: 4px solid #764ba2;">
                        <h4 style="color: #764ba2; margin-bottom: 15px; font-size: 1.2em;">Example: How graphs can be used in AI in pathfinding</h4>
                        <div style="display: flex; align-items: flex-start; gap: 15px; flex-wrap: wrap;">
                            <img src="graph.png" alt="Graph Example" style="max-width: 200px; height: auto; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                            <div style="flex: 1; min-width: 300px;">
                                <p style="margin-bottom: 15px;">We could use our intelligence to find the shortest route between node A and node D by considering all of the possible routes and calculating the overall distance for each route. We would calculate the following values:</p>
                                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 10px;">
                                    <p style="margin-bottom: 8px;"><strong>For A to B to C to D</strong><br>overall distance is 40 + 10 + 40 = 90</p>
                                    <p style="margin-bottom: 8px;"><strong>For A to B to F to E to D</strong><br>overall distance is 40 + 15 + 20 + 5 = 80, which is the shortest</p>
                                    <p style="margin-bottom: 8px;"><strong>For A to F to E to D</strong><br>overall distance is 60 + 20 + 5 = 85</p>
                                    <p><strong>For A to F to B to C to D</strong><br>overall distance is 60 + 15 + 10 + 40 = 125</p>
                                </div>
                                <p style="font-style: italic; color: #666;">For a graph containing 100 nodes this could be quite time consuming. Fortunately, a number of artificial intelligence algorithms have been developed to solve this type of problem.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">Graph Search Algorithms:</h3>
                    
                    <div class="highlight-box">
                        <strong>1. Dijkstra's Algorithm:</strong>
                        <ul>
                            <li>Used to find the shortest path between two nodes in a weighted graph.</li>
                            <li>Dijkstra's algorithm finds the best route from one node to all of the remaining nodes.</li>
                        </ul>
                        <strong>Process:</strong>
                        <div class="process-step">1. Assign initial distances to all nodes (infinity for all except the start node, which is 0).</div>
                        <div class="process-step">2. Update the distances of neighboring nodes iteratively.</div>
                        <div class="process-step">3. Select the node with the smallest distance and mark it as finalized.</div>
                        <div class="process-step">4. Repeat until the shortest path to the destination is determined.</div>
						 <strong>Worked example:</strong>
                        <div style="margin-top: 20px; text-align: center;">
                            <img src="dijkstra-example.png" alt="Dijkstra's Algorithm Example" style="max-width: 80%; height: auto; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
                            <p style="margin-top: 10px; font-size: 0.9em; color: #666; font-style: italic;">Example: Dijkstra's Algorithm working through a graph</p>
                        </div>
                    </div>

                    <div class="highlight-box">
                        <strong>2. A* Algorithm:</strong>
                        <ul>
                            <li>A search algorithm that uses both actual costs (g(n)) and estimated costs to the goal (h(n)) to find the shortest path.</li>
                        </ul>
                        <div class="formula">
                            <strong>Formula:</strong><br>
                            f(n) = g(n) + h(n), where:<br>
                            ‚Ä¢ g(n): Cost from the start node to the current node.<br>
                            ‚Ä¢ h(n): Heuristic estimate of the cost from the current node to the goal.
                        </div>
                        <ul>
                            <li>A* algorithm is based on Dijkstra, but adds an extra heuristic (h) value, an intelligent guess on how far we have to go to reach the destination most efficiently.</li>
                        </ul>
                        <strong>Key Features:</strong>
                        <ul>
                            <li>More efficient in finding paths in large graphs.</li>
                        </ul>
						 <strong>Solved past paper example:</strong>

<div style="margin-top: 20px;">
    <img src="a star algorithm example.png" alt="A* algorithm example" style="width: 100%; height: auto; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); display: block;">
</div>


                    </div>
                </div>
            </div>

            <div class="section">
                <h2 class="section-title">18.b: How artificial neural networks have helped with machine learning</h2>
                
                <p>Artificial Neural Networks are computational models inspired by the structure and functioning of the human brain. They process data through interconnected layers of nodes (neurons) to identify patterns and make predictions.</p>

                <div class="subsection">
                    <h3 class="subsection-title">Structure of ANNs:</h3>
                    <ul>
                        <li><strong>1. Input Layer:</strong>
                            <ul>
                                <li>Receives raw data, such as images, text, or numerical values.</li>
                            </ul>
                        </li>
                        <li><strong>2. Hidden Layers:</strong>
                            <ul>
                                <li>Hidden layers process the input by combining the inputs using numerical connection strengths called weights. A bias is an extra adjustable value added to help the neuron produce the right output, and an activation function is a rule that converts the combined value into the neuron's output signal.</li>
                                <li>Extract features and patterns.</li>
                            </ul>
                        </li>
                        <li><strong>3. Output Layer:</strong>
                            <ul>
                                <li>Produces the final result, such as a classification (e.g., spam or not spam) or prediction (e.g., next word in a sentence).</li>
                            </ul>
                        </li>
                    </ul>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">Key Features of ANNs:</h3>
                    <ul>
                        <li><span class="keyword">Weights</span>: Determine the importance of input data during processing.</li>
                        <li>Each neuron multiplies each input by its weight, adds these weighted values together, and then applies an activation function (a rule that converts the total into an output value).</li>
                        <li>If the input is not a numerical value it must be converted to one so that the weighted values can be summed.</li>
                        <li><span class="keyword">Training</span>: ANNs learn by adjusting weights based on error feedback during training.</li>
                    </ul>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">Advantages of ANNs:</h3>
                    <ul>
                        <li>Capable of handling large datasets and identifying patterns.</li>
                        <li>Versatile in applications like image recognition, voice recognition, and natural language processing.</li>
                    </ul>
                </div>
            </div>

            <div class="section">
                <h2 class="section-title">18.c: Deep Learning, Machine Learning and Reinforcement Learning</h2>

                <div class="subsection">
                    <h3 class="subsection-title">Machine Learning (ML):</h3>
                    <p>Machine learning enables systems to learn from data and improve performance without explicit programming. It is divided into three categories:</p>
                    
                    <div class="highlight-box">
                        <strong>1. Supervised Learning:</strong>
                        <ul>
                            <li>Uses labelled data (data with known outputs) for training.</li>
                            <li>Supervised learning can be used in two common ways: classification, where the output is a category (for example, spam or not spam), and regression, where the output is a number (for example, a predicted house price).</li>
                            <li><strong>Example tasks:</strong> Predicting housing prices, spam detection.</li>
                        </ul>
                    </div>

                    <div class="highlight-box">
                        <strong>2. Unsupervised Learning:</strong>
                        <ul>
                            <li>Finds hidden patterns in unlabelled data.</li>
                            <li>Unlabelled data is data without predefined categories and the system learns without explicit labels.</li>
                            <li>Groups data into clusters based on similarity, and finds associations between data items.</li>
                            <li><strong>Example tasks:</strong> Customer segmentation.</li>
                        </ul>
                    </div>

                    <div class="highlight-box">
                        <strong>3. Reinforcement Learning:</strong>
                        <ul>
                            <li>An agent learns to make decisions by interacting with its environment.</li>
                            <li>Rewards and penalties guide the learning process.</li>
                            <li><strong>Example tasks:</strong> Robotics, game AI.</li>
                        </ul>
                    </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">Deep Learning (DL):</h3>
                    <p>Deep learning is a subset of machine learning that uses artificial neural networks with multiple layers to process data and learn hierarchical features.</p>
                    <ul>
                        <li>In a deep learning network, each connection between two neurons has a weight, which is a number that controls how strongly the signal from one neuron affects the next neuron.</li>
                    </ul>
                    <strong>Key Concepts:</strong>
                    <ul>
                        <li>Processes data through multiple layers of neurons, each layer extracting more abstract features.</li>
                        <li>Suitable for tasks like image recognition, speech synthesis, and autonomous driving.</li>
                    </ul>
                </div>
            </div>

            <div class="section">
                <h2 class="section-title">18.d: Back propagation of errors and regression methods in machine learning</h2>

                <div class="subsection">
                    <h3 class="subsection-title">Backpropagation:</h3>
                    <p>Backpropagation is an optimization technique used in training artificial neural networks. It minimizes errors by adjusting the weights of connections based on feedback from the output layer.</p>
                    <p>It is applied first to the nodes in the output layer and then works backward through the nodes in hidden layers.</p>
                    
                    <strong>Key Steps:</strong>
                    <div class="process-step"><strong>1. Forward Pass:</strong> Input data is processed, and predictions are made.</div>
                    <div class="process-step"><strong>2. Error Calculation:</strong> The difference between predicted and actual outputs is calculated.</div>
                    <div class="process-step"><strong>3. Backward Pass:</strong> The network sends the error information backward from the output layer to earlier layers and slightly adjusts the weights to reduce the error. This adjustment method is called gradient descent, which means changing the weights step by step in the direction that makes the error smaller.</div>
                    <div class="process-step"><strong>4. Repeat:</strong> This process continues until the error is minimized.</div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">Regression in Machine Learning:</h3>
                    <p>Regression is a statistical technique used to model relationships between variables and make continuous predictions.</p>
                    <p>It helps us understand how an output value (dependent variable, such as house price) changes when one or more input values (independent variables, such as area or number of rooms) change. This makes regression useful for prediction tasks such as weather forecasting.</p>
                    
                    <strong>Key Features:</strong>
                    <ul>
                        <li><span class="keyword">Linear Regression</span>: Models a straight-line relationship between variables.</li>
                        <li><span class="keyword">Polynomial Regression</span>: Models a curved (non-linear) relationship between inputs and outputs by using a polynomial equation, such as one that includes squared or cubed terms (for example, x¬≤).</li>
                    </ul>
                    
                    <strong>Applications:</strong>
                    <ul>
                        <li>Predicting sales trends.</li>
                        <li>Forecasting weather patterns.</li>
                        <li>Estimating housing prices.</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div class="layer-menu">
        <p class="actions-heading">Quick navigation: jump to another layer</p>
        <div class="layer-menu-links">
            <a class="layer-link" href="layer2.html"><span class="layer-number">2</span> Layer 2</a>
            <a class="layer-link" href="layer3.html"><span class="layer-number">3</span> Layer 3</a>
            <a class="layer-link" href="layer4.html"><span class="layer-number">4</span> Layer 4</a>
        </div>
    </div>

    <script>
        function downloadHTML() {
            const htmlContent = document.documentElement.outerHTML;
            const blob = new Blob([htmlContent], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'IGCSE_18.1_AI_Machine_Learning_Notes.html';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        document.querySelectorAll('.section').forEach(section => {
            section.addEventListener('mouseenter', function() {
                this.style.backgroundColor = '#f0f4ff';
            });
            section.addEventListener('mouseleave', function() {
                this.style.backgroundColor = '#f8f9fa';
            });
        });

        const syllabusModal = document.getElementById('syllabus-modal');
        const openSyllabus = document.getElementById('open-syllabus');
        const closeSyllabus = document.getElementById('close-syllabus');

        const toggleSyllabus = (show) => {
            syllabusModal.classList.toggle('is-open', show);
        };

        openSyllabus.addEventListener('click', () => toggleSyllabus(true));
        closeSyllabus.addEventListener('click', () => toggleSyllabus(false));

        syllabusModal.addEventListener('click', (event) => {
            if (event.target === syllabusModal) {
                toggleSyllabus(false);
            }
        });
    </script>
  </main>
  <div class="section-divider"></div>
    <div id="video-section" class="videos" style="display:none;">
    <div class="dashboard-section-title">üé• Additional Resources</div>
    <div class="resources-grid">
      <div class="videos-column">
        <div id="videos-container"></div>
      </div>
      <div class="extras-column">
        <div class="placeholder" id="mind-map-placeholder">üß† Mind Map (coming soon)</div>
        <div class="placeholder" id="references-placeholder">üìö Reference Documents (coming soon)</div>
      </div>
    </div>
  </div>


  <footer>
    üìß Contact Dr. Hamdeni at <a href="mailto:chams-eddine.hemdani@tn.maarifschools.org">chams-eddine.hemdani@tn.maarifschools.org</a>
  </footer>

<script type="module">
  import { supabase } from '../../../supabaseClient.js';

  if (window.authSessionReady) {
    await window.authSessionReady;
  }


  const username = localStorage.getItem("username");
  const student_name = localStorage.getItem("student_name");
  const platform = localStorage.getItem("platform");
  const point_id = "18";

  if (!username || !student_name) {
    document.getElementById("error-message").style.display = "block";
  } else {
    document.getElementById("student-name").textContent = "üë§ " + student_name;
    document.getElementById("platform-name").textContent = "üéì Platform: " + platform;
    document.getElementById("content-area").style.display = "block";

    fetch("../index.json")
      .then(res => res.json())
      .then(list => {
        const found = list.find(p => p.id.toLowerCase() === point_id.toLowerCase());
        if (found) {
          document.getElementById("point-title").textContent = "üìç " + found.title;
        }
      });

    fetch("videos.json")
      .then(res => res.json())
      .then(data => {
        if (data[point_id]) {
          const { videos = [] } = data[point_id];

          if (videos.length > 0) {
            document.getElementById("video-section").style.display = "block";
            const container = document.getElementById("videos-container");
            videos.forEach(video => {
              const wrapper = document.createElement("div");
              wrapper.innerHTML = video.iframe;
              wrapper.style.marginBottom = "20px";
              container.appendChild(wrapper);
            });
          }
        }
      });
  }

  async function updateProgress() {
    const platform = localStorage.getItem("platform");
    const username = localStorage.getItem("username");

    if (!username || !platform) {
      alert("‚ùå Missing student information. Please log in again.");
      return false;
    }

    const tables = {
      A_Level: 'a_theory_progress',
      AS_Level: 'as_theory_progress',
      IGCSE: 'igcse_theory_progress'
    };
    const table = tables[platform];

    const { data: existing } = await supabase
      .from(table)
      .select('reached_layer')
      .eq('username', username)
      .eq('point_id', point_id.toLowerCase())
      .maybeSingle();

    const score = v => v === 'R' ? 4 : (parseInt(v, 10) || 0);
    if (score(existing?.reached_layer) < 1) {
      const { error } = await supabase
        .from(table)
        .upsert({
          username: username,
          point_id: point_id.toLowerCase(),
          reached_layer: '1'
        }, { onConflict: ['username', 'point_id'] });

      if (error) {
        console.error("‚ùå Supabase Error:", error);
        alert(`‚ùå Failed to update progress: ${error.message}`);
        return false;
      }
      console.log("‚úÖ Progress updated in table:", table);
    }

    return true;
  }

  async function sendFeedback(feedback_type, comment = "") {
    const feedbackTable = {
      A_Level: 'a_theory_feedback',
      AS_Level: 'as_theory_feedback',
      IGCSE: 'igcse_theory_feedback'
    }[platform];
    const fullFeedback = comment
      ? `${feedback_type}: ${comment}`
      : feedback_type;
    try {
      const { error } = await supabase
        .from(feedbackTable)
        .upsert([
          {
            username: username,
            point_id: point_id.toLowerCase(),
            feedback: fullFeedback,
            date: new Date().toISOString().slice(0, 10)
          }
        ], { onConflict: ['username', 'point_id'] });

      if (error) {
        console.error("‚ùå Feedback insert error:", error);
        alert(`‚ùå Failed to submit feedback: ${error.message}`);
      }
    } catch (err) {
      console.error("‚ùå Feedback insert error:", err);
      alert("‚ùå Failed to submit feedback.");
    }
  }

  async function markClear() {
    if (await updateProgress()) {
      await sendFeedback("clear");
      window.location.href = "layer2.html";
    }
  }
  window.markClear = markClear;

  async function markConfused() {
    if (await updateProgress()) {
      await sendFeedback("confused");
      window.location.href = "layer2.html";
    }
  }
  window.markConfused = markConfused;

  function showHelp() {
    const section = document.getElementById("help-section");
    section.style.display = section.style.display === "block" ? "none" : "block";
  }
  window.showHelp = showHelp;

  async function submitHelp() {
    const comment = document.getElementById("unclear").value.trim();
    if (!comment) {
      alert("Please describe what you need help with.");
      return;
    }

    if (await updateProgress()) {
      await sendFeedback("help", comment);
      window.location.href = "layer2.html";
    }
  }
  window.submitHelp = submitHelp;
</script>
</body>
</html>
