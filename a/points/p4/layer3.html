<!DOCTYPE html>
<html>
<head>
  <title>Layer 3</title>
  <link rel="stylesheet" href="../dashboard.css">
</head>
<body>
  <div class="header">Layer 3 - Coming Soon</div>
  <div style="text-align: center; margin-top: 100px;">This content is coming soon.</div>
  <div style="text-align: center; margin: 20px;">
  <a href="layer2.html"><button>← Previous</button></a>
  <a href="layer4.html"><button>Next →</button></a>
  </div>
  <script>
const SUPABASE_URL = "https://tsmzmuclrnyryuvanlxl.supabase.co";
const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRzbXptdWNscm55cnl1dmFubHhsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc3MzM5NjUsImV4cCI6MjA2MzMwOTk2NX0.-l7Klmp5hKru3w2HOWLRPjCiQprJ2pOjsI-HPTGtAiw";
(async () => {
  const username = localStorage.getItem('username');
  const platform = localStorage.getItem('platform');
  const point_id = window.location.pathname.split('/')
    .find(p => /^p\d+$/i.test(p));
  const tables = { A_Level: 'a_theory_progress', AS_Level: 'as_theory_progress', IGCSE: 'igcse_theory_progress' };
  const table = tables[platform];
  if (username && table && point_id) {
    await fetch(`${SUPABASE_URL}/rest/v1/${table}`, {
      method: 'PATCH',
      headers: {
        apikey: SUPABASE_KEY,
        'Content-Type': 'application/json',
        Prefer: 'resolution=merge-duplicates'
      },
      body: JSON.stringify({
        username: username,
        point_id: point_id.toUpperCase(),
        reached_layer: 3
      })
    });
  }
  window.location.href = 'layer4.html';
})();
  </script></body></html>